pipeline {
    agent any

    triggers{
    githubPush()
    }

  stages{
    stage('Checkout from github') {

            steps {
                checkout scm

            }
    }
    stage ('Build Project')
    {
        steps{
             script{
                    runTheGradleBuildArtifactoryPlugin("clean build ")
             }
         }
    }
  }
}
def runTheGradleBuildArtifactoryPlugin(String command){
    println "running the artifactory plugin gradle build"
    println "command: ${command}"
    sh chmod +x gradlew
    rtGradle.run rootDir: ".", buildFile: 'build.gradle', switches: '-g .gradle ',tasks: "{$command}".toString()
}
